  :root {
    --font-size-base: 18px;
    --bg: #0d1117; --surface: #161b22; --border: #30363d;
    --text: #c9d1d9; --text-muted: #8b949e; --accent: #58a6ff;
    --green: #56d364; --green-bg: #1f3a2d;
    --purple: #bc8cff; --purple-bg: #2a1f3a;
    --blue: #58a6ff; --blue-bg: #1f2a3a;
    --orange: #f0883e; --orange-bg: #3a2a1f;
    --radius: 8px;
    --code-kw: #ff7b72; --code-str: #a5d6ff; --code-ident: #d2a8ff;
  }
  [data-theme="light"] {
    --bg: #f6f8fa; --surface: #ffffff; --border: #d0d7de;
    --text: #1f2328; --text-muted: #656d76; --accent: #0969da;
    --green: #1a7f37; --green-bg: #dafbe1;
    --purple: #8250df; --purple-bg: #eddeff;
    --blue: #0969da; --blue-bg: #ddf4ff;
    --orange: #bc4c00; --orange-bg: #fff1e5;
    --code-kw: #cf222e; --code-str: #0a3069; --code-ident: #8250df;
  }
  * { margin: 0; padding: 0; box-sizing: border-box; }
  html { font-size: var(--font-size-base); }
  body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; background: var(--bg); color: var(--text); display: flex; height: 100vh; overflow: hidden; }

  /* Sidebar */
  .sidebar { width: 300px; min-width: 300px; background: var(--surface); border-right: 1px solid var(--border); display: flex; flex-direction: column; padding: 1.25rem; gap: 1rem; overflow-y: auto; }
  .sidebar h1 { font-size: 1.1rem; color: var(--accent); display: flex; align-items: center; gap: 0.5rem; flex: 1; }
  .sidebar h1 span { font-size: 1.2rem; }
  .sidebar-header { display: flex; align-items: center; justify-content: space-between; }
  .theme-toggle { background: none; border: 1px solid var(--border); border-radius: var(--radius); color: var(--text-muted); cursor: pointer; font-size: 0.9rem; padding: 0.25rem 0.5rem; line-height: 1; }
  .theme-toggle:hover { color: var(--text); border-color: var(--accent); }

  /* Search */
  .search-box { position: relative; }
  .search-box input { width: 100%; padding: 0.5rem 0.75rem 0.5rem 2rem; background: var(--bg); border: 1px solid var(--border); border-radius: var(--radius); color: var(--text); font-size: 0.85rem; outline: none; transition: border-color 0.2s; }
  .search-box input:focus { border-color: var(--accent); }
  .search-box::before { content: '⌕'; position: absolute; left: 0.6rem; top: 50%; transform: translateY(-50%); color: var(--text-muted); font-size: 0.9rem; }

  /* Filters */
  .filters { display: flex; flex-direction: column; gap: 0.5rem; }
  .section-title { font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.05em; color: var(--text-muted); }
  .filter-btn { display: flex; align-items: center; gap: 0.5rem; padding: 0.4rem 0.6rem; background: transparent; border: 1px solid var(--border); border-radius: var(--radius); color: var(--text); font-size: 0.8rem; cursor: pointer; transition: all 0.15s; }
  .filter-btn:hover { background: var(--bg); }
  .filter-btn.active { border-color: var(--accent); background: var(--bg); }
  .filter-btn .dot { width: 8px; height: 8px; border-radius: 50%; flex-shrink: 0; }
  .filter-btn .count { margin-left: auto; color: var(--text-muted); font-size: 0.75rem; }

  /* View toggle buttons */
  .view-group { display: flex; gap: 0.35rem; margin-top: 0.5rem; }
  .view-btn { padding: 0.35rem 0.6rem; background: transparent; border: 1px solid var(--border); border-radius: var(--radius); color: var(--text-muted); font-size: 0.75rem; cursor: pointer; transition: all 0.15s; }
  .view-btn:hover { background: var(--bg); }
  .view-btn.active { border-color: var(--accent); color: var(--text); background: var(--bg); }
  .dot-stdlib { background: var(--green); }
  .dot-internal { background: var(--purple); }
  .dot-private { background: var(--blue); }
  .dot-external { background: var(--orange); }

  /* Sort */
  .sort-row { display: flex; align-items: center; gap: 0.5rem; }
  .sort-row select { flex: 1; padding: 0.35rem 0.5rem; background: var(--bg); border: 1px solid var(--border); border-radius: var(--radius); color: var(--text); font-size: 0.8rem; outline: none; }
  .sort-row select:focus { border-color: var(--accent); }

  /* Reverse lookup panel */
  .reverse-panel { display: none; flex-direction: column; gap: 0.5rem; padding: 0.75rem; background: var(--bg); border: 1px solid var(--border); border-radius: var(--radius); }
  .reverse-panel.visible { display: flex; }
  .reverse-panel .reverse-header { display: flex; justify-content: space-between; align-items: center; }
  .reverse-panel .reverse-title { font-size: 0.8rem; color: var(--accent); font-family: 'SF Mono', 'Fira Code', monospace; word-break: break-all; }
  .reverse-panel .reverse-close { background: none; border: none; color: var(--text-muted); cursor: pointer; font-size: 1rem; padding: 0; line-height: 1; }
  .reverse-panel .reverse-close:hover { color: var(--text); }
  .reverse-list { list-style: none; display: flex; flex-direction: column; gap: 2px; max-height: 200px; overflow-y: auto; }
  .reverse-list li { font-size: 0.78rem; padding: 0.25rem 0.4rem; border-radius: 4px; cursor: pointer; font-family: 'SF Mono', 'Fira Code', monospace; }
  .reverse-list li:hover { background: var(--surface); }
  .reverse-list a { color: var(--text); text-decoration: none; }
  .reverse-list a:hover { color: var(--accent); }
  .reverse-count { font-size: 0.75rem; color: var(--text-muted); }

  /* Code preview panel — floating */
  .code-panel { display: none; flex-direction: column; gap: 0.5rem; padding: 1rem; background: var(--surface); border: 1px solid var(--border); border-radius: var(--radius); position: fixed; z-index: 60; width: 480px; max-width: 90vw; max-height: 60vh; overflow-y: auto; box-shadow: 0 8px 32px rgba(0,0,0,0.5); }
  .code-panel.visible { display: flex; }
  .code-panel .code-header { display: flex; justify-content: space-between; align-items: center; }
  .code-panel .code-title { font-size: 0.75rem; color: var(--accent); font-family: 'SF Mono', 'Fira Code', monospace; word-break: break-all; }
  .code-panel .code-close { background: none; border: none; color: var(--text-muted); cursor: pointer; font-size: 1rem; padding: 0; line-height: 1; }
  .code-panel .code-close:hover { color: var(--text); }
  .code-panel .code-kind { font-size: 0.65rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px; }
  .code-panel .code-link { font-size: 0.7rem; color: var(--accent); text-decoration: none; font-family: 'SF Mono', 'Fira Code', monospace; word-break: break-all; }
  .code-panel .code-usages { font-size: 0.7rem; color: var(--accent); cursor: pointer; text-decoration: none; }
  .code-panel .code-usages:hover { text-decoration: underline; }
  .code-panel pre { margin: 0; padding: 0.6rem; background: var(--bg); border: 1px solid var(--border); border-radius: 6px; overflow-x: auto; max-height: 300px; }
  .code-panel code { font-family: 'SF Mono', 'Fira Code', monospace; font-size: 0.72rem; color: var(--text); line-height: 1.5; white-space: pre; }
  .code-panel code .kw { color: var(--code-kw); }
  .code-panel code .str { color: var(--code-str); }
  .code-panel code .ident { color: var(--code-ident); }
  .code-panel code .punct { color: var(--text-muted); }

  /* Stats */
  .stats { font-size: 0.75rem; color: var(--text-muted); padding-top: 0.5rem; border-top: 1px solid var(--border); line-height: 1.6; }
  .stats .stat-label { color: var(--text); position: relative; cursor: help; }
  .stat-label .stat-tip { display: none; position: absolute; bottom: calc(100% + 6px); left: 0; background: var(--surface); border: 1px solid var(--border); border-radius: 6px; padding: 4px 8px; font-size: 0.65rem; white-space: nowrap; z-index: 10; color: var(--text-muted); box-shadow: 0 4px 12px rgba(0,0,0,0.4); pointer-events: none; font-weight: normal; text-transform: none; letter-spacing: normal; }
  .stat-label .stat-tip::after { content: ''; position: absolute; top: 100%; left: 12px; border: 5px solid transparent; border-top-color: var(--border); }
  .stat-label:hover .stat-tip { display: block; }
  .top-imports { list-style: none; margin-top: 0.25rem; }
  .top-imports li { display: flex; justify-content: space-between; gap: 0.5rem; padding: 1px 0; font-family: 'SF Mono', 'Fira Code', monospace; font-size: 0.7rem; }
  .top-imports li span:first-child { overflow: hidden; text-overflow: ellipsis; white-space: nowrap; min-width: 0; }
  .top-imports .ti-count { color: var(--accent); flex-shrink: 0; }
  .cat-bar { display: flex; height: 6px; border-radius: 3px; overflow: hidden; margin-top: 0.25rem; }
  .cat-bar span { transition: width 0.3s; }
  .cat-bar-legend { display: flex; flex-wrap: wrap; gap: 0.3rem 0.6rem; margin-top: 0.25rem; font-size: 0.65rem; }
  .cat-bar-legend span::before { content: ''; display: inline-block; width: 6px; height: 6px; border-radius: 50%; margin-right: 3px; vertical-align: middle; }

  /* Main content */
  .main { flex: 1; overflow-y: auto; padding: 1.5rem; }
  .main-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.25rem; }
  .main-header h2 { font-size: 0.85rem; color: var(--text-muted); font-weight: 400; }
  .result-count { font-size: 0.8rem; color: var(--text-muted); }

  /* Grid */
  .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(360px, 1fr)); gap: 0.75rem; }
  .card { background: var(--surface); border: 1px solid var(--border); border-radius: var(--radius); padding: 1rem; transition: border-color 0.15s, padding 0.15s; }
  .card:hover { border-color: var(--accent); }
  .card.highlighted { border-color: var(--accent); background: #1c2333; }
  .card-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 0.75rem; cursor: pointer; }
  .card-header .file-info { display: flex; align-items: center; gap: 0.5rem; flex: 1; min-width: 0; }
  .card-header a { color: var(--accent); text-decoration: none; font-size: 0.85rem; font-family: 'SF Mono', 'Fira Code', monospace; word-break: break-all; }
  .card-header a:hover { text-decoration: underline; }
  .card-header .file-icon { font-size: 1rem; line-height: 1; }
  [data-theme="light"] .card-header .file-icon i { color: var(--text-muted) !important; }
  .card-header .header-right { display: flex; align-items: center; gap: 0.4rem; }
  .card-header .import-count { font-size: 0.7rem; color: var(--text-muted); background: var(--bg); padding: 2px 6px; border-radius: 10px; }
  .card-header .collapse-btn { background: none; border: none; color: var(--text-muted); cursor: pointer; font-size: 0.7rem; padding: 2px 4px; line-height: 1; transition: transform 0.15s; }
  .card-header .collapse-btn:hover { color: var(--text); }
  .card.collapsed { padding-bottom: 0.5rem; }
  .card.collapsed .card-header { margin-bottom: 0; }
  .card.collapsed .card-section { display: none; }
  .card.collapsed .collapse-btn { transform: rotate(-90deg); }
  .tags { display: flex; flex-wrap: wrap; gap: 6px; }

  /* Card sections */
  .card-section { margin-top: 1rem; }
  .card-section:first-of-type { margin-top: 0.5rem; }
  .card-section-label { font-size: 0.6rem; text-transform: uppercase; letter-spacing: 0.5px; color: var(--text-muted); margin-bottom: 6px; }
  .tag { display: inline-block; font-size: 0.7rem; padding: 2px 8px; border-radius: 12px; font-family: 'SF Mono', 'Fira Code', monospace; cursor: pointer; transition: outline 0.1s; position: relative; }
  .tag:hover { outline: 1px solid var(--accent); }
  .tag.selected { outline: 2px solid var(--accent); }
  .tag-stdlib { background: var(--green-bg); color: var(--green); }
  .tag-internal { background: var(--purple-bg); color: var(--purple); }
  .tag-private { background: var(--blue-bg); color: var(--blue); }
  .tag-external { background: var(--orange-bg); color: var(--orange); }

  /* Export tags — outlined style */
  .export-row { display: flex; flex-wrap: wrap; gap: 6px; }
  .export-row.hidden { display: none; }
  .etag { display: inline-block; font-size: 0.65rem; padding: 1px 7px; border-radius: 12px; font-family: 'SF Mono', 'Fira Code', monospace; border: 1px solid var(--border); color: var(--text); background: transparent; cursor: pointer; transition: outline 0.1s; position: relative; }
  .etag:hover { outline: 1px solid var(--accent); }
  .etag:hover .etag-detail { display: block; }
  .etag .ekind { opacity: 0.4; margin-left: 3px; font-size: 0.55rem; }
  .etag.private { opacity: 0.65; border-style: dashed; }

  /* Export tooltip */
  .etag-detail { display: none; position: absolute; bottom: calc(100% + 6px); left: 50%; transform: translateX(-50%); background: var(--surface); border: 1px solid var(--border); border-radius: 6px; padding: 4px 8px; font-size: 0.6rem; white-space: nowrap; z-index: 10; color: var(--text-muted); box-shadow: 0 4px 12px rgba(0,0,0,0.4); pointer-events: none; }
  .etag-detail::after { content: ''; position: absolute; top: 100%; left: 50%; transform: translateX(-50%); border: 5px solid transparent; border-top-color: var(--border); }

  /* Copy button */
  .code-copy { position: absolute; top: 0.4rem; right: 0.4rem; background: var(--surface); border: 1px solid var(--border); border-radius: 4px; color: var(--text-muted); cursor: pointer; font-size: 0.65rem; padding: 2px 6px; transition: all 0.15s; }
  .code-copy:hover { color: var(--text); border-color: var(--accent); }
  .code-pre-wrap { position: relative; }

  /* Empty section */
  .section-empty { font-size: 0.65rem; color: var(--text-muted); font-style: italic; }

  /* Import detail tooltip */
  .tag-detail { display: none; position: absolute; bottom: calc(100% + 6px); left: 50%; transform: translateX(-50%); background: var(--surface); border: 1px solid var(--border); border-radius: 6px; padding: 6px 10px; font-size: 0.65rem; white-space: nowrap; z-index: 10; color: var(--text-muted); box-shadow: 0 4px 12px rgba(0,0,0,0.4); pointer-events: none; }
  .tag-detail::after { content: ''; position: absolute; top: 100%; left: 50%; transform: translateX(-50%); border: 5px solid transparent; border-top-color: var(--border); }
  .tag:hover .tag-detail { display: block; }
  .tag-detail .detail-kind { color: var(--accent); font-weight: 600; }
  .tag-detail .detail-names { color: var(--text); margin-top: 2px; }

  .no-results { text-align: center; padding: 3rem; color: var(--text-muted); }

  /* Mobile toggle */
  .menu-toggle { display: none; position: fixed; top: 0.75rem; left: 0.75rem; z-index: 100; background: var(--surface); border: 1px solid var(--border); border-radius: var(--radius); color: var(--text); font-size: 1.2rem; padding: 0.4rem 0.6rem; cursor: pointer; line-height: 1; }
  .sidebar-overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.5); z-index: 49; }

  ::-webkit-scrollbar { width: 6px; }
  ::-webkit-scrollbar-track { background: transparent; }
  ::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }

  /* Tablet */
  @media (max-width: 900px) {
    .grid { grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); }
  }

  /* Mobile */
  @media (max-width: 640px) {
    .menu-toggle { display: block; }
    body { flex-direction: column; }
    .sidebar { position: fixed; left: -320px; top: 0; bottom: 0; z-index: 50; width: 280px; min-width: 280px; transition: left 0.25s ease; }
    .sidebar.open { left: 0; }
    .sidebar-overlay.visible { display: block; }
    .main { padding: 1rem; padding-top: 3.5rem; height: 100vh; }
    .grid { grid-template-columns: 1fr; }
    .card-header a { font-size: 0.78rem; }
    .tag { font-size: 0.65rem; padding: 2px 6px; }
  }
